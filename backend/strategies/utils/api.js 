import axios from 'axios';

const API_BASE_URL = 'http://localhost:8000'; // Update this if your backend is deployed elsewhere

export const getSignals = async () => {
  try {
    const response = await axios.get(`${API_BASE_URL}/signals`);
    return response.data;
  } catch (error) {
    console.error("Error fetching signals:", error);
    return [];
  }
};

export const getPnL = async () => {
  try {
    const response = await axios.get(`${API_BASE_URL}/pnl`);
    return response.data;
  } catch (error) {
    console.error("Error fetching PnL data:", error);
    return {};
  }
};

export const getWeights = async () => {
  try {
    const response = await axios.get(`${API_BASE_URL}/weights`);
    return response.data;
  } catch (error) {
    console.error("Error fetching weights:", error);
    return {};
  }
};

export const updateWeights = async (weights) => {
  try {
    const response = await axios.post(`${API_BASE_URL}/weights`, weights);
    return response.data;
  } catch (error) {
    console.error("Error updating weights:", error);
    return { success: false };
  }
};

export const toggleStrategy = async (strategyName, enabled) => {
  try {
    const response = await axios.post(`${API_BASE_URL}/toggle`, {
      strategy: strategyName,
      enabled: enabled
    });
    return response.data;
  } catch (error) {
    console.error("Error toggling strategy:", error);
    return { success: false };
  }
};

export const getHoldings = async () => {
  try {
    const response = await axios.get(`${API_BASE_URL}/holdings`);
    return response.data;
  } catch (error) {
    console.error("Error fetching holdings:", error);
    return [];
  }
};